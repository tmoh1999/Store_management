<!DOCTYPE html>
<html>
<head>
    <title>View Data</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/product_list.css') }}">
</head>
<body>



    <div class="container2">
    	<input id="date_input" placeholder="Choose Date"  type="date" onchange="updatelist2(this.value)" >
    	<br><br><br>
    <table border="1" width="" id="sales_table">
    	<caption>Sales:
          <select class="number" id="sales_filter" onchange="updatelist()">
          	<option>ALL</option>
              <option>Today</option>
          </select>
          

         </caption>
        <tr>
        	<th class="titles"><input id="start_money" placeholder="Start"  class="cell-input" type="number" onchange="updatetotal(this.value)" ></th>
            <th class="titles"></th>
            <th class="titles" id="total_quantity"></th>
            <th class="titles" id="total_price"></th>
            <th class="titles" id="remain"></th>
        </tr>
        <tr>
        	<th class="titles">SaleID</th>
            <th class="titles">Date</th>
            <th class="titles">N.products</th>
            <th class="titles">Total Price</th>
            <th class="titles"></th>
        </tr>
        {% for row in data %}
        <tr>
            <td>{{ row["sale_id"] }}</td>
            <td>{{ row["date"] }}</td>
            <td>{{ row["quantity"] }}</td>
            <td>{{ row["total_amount"] }}</td>
           
 <td>	
<button onclick="window.open('/sales/{{ row["sale_id"] }}/viewsaleitems', '_blank', 'width=600,height=400')">
 View
 </button>
</td>
             <td>	
<button onclick="removeSale({{ row["sale_id"] }})">
 Remove
 </button>
</td>
        </tr>
        {% endfor %}
    </table>
   </div>
 <!--
 <script src="https://cdn.jsdelivr.net/npm/eruda"></script>
<script>
  eruda.init();
  console.log("Hello Android!");
  
 </script>
 -->
<script>
 
  
  let data = {{ data|tojson }};
  console.log(data);
  let xtot=0,xtot2=0;
  data.forEach(row => {
  	
    
    console.log("quantity"+row.quantity);
    xtot+=row.total_amount;
    xtot2+=row.quantity;
});
console.log(xtot);
document.getElementById("total_price").innerHTML=xtot;
document.getElementById("total_quantity").innerHTML=xtot2;
console.log(6);
</script>
<script src="{{ url_for('static', filename='js/sales_list.js') }}"></script>
</body>
</html>